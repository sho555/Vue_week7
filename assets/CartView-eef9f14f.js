import{_ as b,o as d,c,d as t,F as r,g as u,h as m,t as o,n as y,b as h,i as v,v as f}from"./index-f6ab9a29.js";const{VITE_APP_URL:_,VITE_APP_PATH:g}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"jlhex2",BASE_URL:"/Vue_week7/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},k={data(){return{products:[],productId:"",cart:{},loadingItem:""}},methods:{getCarts(){const s=`${_}/v2/api/${g}/cart`;this.$http.get(s).then(n=>{this.cart=n.data.data,console.log("購物車",n.data)}).catch(n=>{console.log(n.res.data.message),console.log("can't get carts Data")})},updateCartItem(s){const n={product_id:s.product.id,qty:s.qty};this.loadingItem=s.id,this.$http.put(`${_}/v2/api/${g}/cart/${s.id}`,{data:n}).then(a=>{console.log("更新購物車",a.data),this.getCarts(),this.loadingItem=""}).catch(a=>{console.log(a.res.data.message),console.log("can't get update Data")})},deleteItem(s){const n=`${_}/v2/api/${g}/cart/${s.id}`;this.loadingItem=s.id,this.$http.delete(n).then(a=>{console.log("刪除購物車",a.data),this.loadingItem="",this.getCarts()}).catch(a=>{console.log(a.res.data.message),console.log("can't get delete Data")})}},mounted(){this.getCarts()}},C={class:"table align-middle"},I=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),x={style:{width:"200px"}},V={key:0,class:"h5"},P={key:1},$={class:"h6"},D={class:"h5"},E={class:"btn-group btn-group-sm"},T=["onClick"],A=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),S=["onClick"],U=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),w=t("div",{class:"text-end"},[t("button",{class:"btn btn-outline-danger",type:"button"}," 清空購物車 ")],-1),R={class:"table align-middle"},q=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),B=["onClick","disabled"],L=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),M={class:"input-group input-group-sm"},N=["onUpdate:modelValue","disabled","onChange"],z=["value"],F={class:"text-end"},H=t("td",{colspan:"3",class:"text-end"},"總計",-1),O={class:"text-end"},j=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),G={class:"text-end text-success"};function J(s,n,a,K,i,p){return d(),c(r,null,[t("table",C,[I,t("tbody",null,[(d(!0),c(r,null,u(i.products,e=>(d(),c("tr",{key:e.id},[t("td",x,[t("div",{style:y([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,o(e.title),1),t("td",null,[e.price==e.origin_price?(d(),c("div",V,o(e.price)+" 元",1)):(d(),c("div",P,[t("del",$,"原價 "+o(e.origin_price)+" 元",1),t("div",D,"現在只要 "+o(e.price)+" 元",1)]))]),t("td",null,[t("div",E,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:l=>s.openModal(e.id)},[A,h(" 查看更多 ")],8,T),t("button",{type:"button",class:"btn btn-outline-danger",onClick:l=>s.addToCart(e.id)},[U,h(" 加到購物車 ")],8,S)])])]))),128))])]),w,t("table",R,[q,t("tbody",null,[i.cart.carts?(d(!0),c(r,{key:0},u(i.cart.carts,e=>(d(),c("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>p.deleteItem(e),disabled:e.id===i.loadingItem},[L,h(" x ")],8,B)]),t("td",null,o(e.product.title),1),t("td",null,[t("div",M,[v(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":l=>e.qty=l,disabled:e.id===i.loadingItem,onChange:l=>p.updateCartItem(e)},[(d(),c(r,null,u(20,l=>t("option",{value:l,key:l+"1234578"},o(l),9,z)),64))],40,N),[[f,e.qty]])])]),t("td",F,o(e.total),1)]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[H,t("td",O,o(i.cart.total),1)]),t("tr",null,[j,t("td",G,o(i.cart.final_total),1)])])])],64)}const W=b(k,[["render",J]]);export{W as default};
